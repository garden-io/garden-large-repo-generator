
[2023-07-14T12:20:20.342Z] Getting status...

[2023-07-14T12:20:21.043Z] resolve provider exec is ready.

[2023-07-14T12:20:21.047Z] resolve provider templated is ready.

[2023-07-14T12:20:21.051Z] resolve provider container is ready.

[2023-07-14T12:20:21.057Z] resolve provider pulumi is ready.

[2023-07-14T12:20:21.066Z] resolve provider jib is ready.

[2023-07-14T12:20:21.077Z] resolve provider kubernetes is ready.

[2023-07-14T12:20:21.080Z] Cached (took 0.7 sec)

[2023-07-14T12:20:21.081Z] Run with --force-refresh to force a refresh of provider statuses.

[2023-07-14T12:20:21.081Z] Resolving actions and modules...

[2023-07-14T12:20:21.222Z] Scanning module spring-boot-image root at /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot
  → Includes: ./**/pom.xml,./**/src/**/*,pom.xml
  → Excludes: **/.garden/**/*

[2023-07-14T12:20:21.310Z] Found 3 files in module spring-boot-image root /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot

[2023-07-14T12:20:21.389Z] Scanning module spring-boot-service root at /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot
  → Includes: ./*/config/*.xml,./*/config/application-gcp-dev.properties,./*/config/application-gcp.properties,./*/secrets/dev/**,./deployment/config/common.yaml,deployment/config/dev.yaml
  → Excludes: spring-boot,**/.garden/**/*

[2023-07-14T12:20:21.455Z] Found 2 files in module spring-boot-service root /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot

[2023-07-14T12:20:21.460Z] Converting jib-container module spring-boot-image to actions

[2023-07-14T12:20:21.460Z] Converting pulumi module spring-boot-service to actions

[2023-07-14T12:20:21.465Z] Module spring-boot-service converted to 1 action(s)

[2023-07-14T12:20:21.465Z] Module spring-boot-image converted to 1 action(s)

[2023-07-14T12:20:21.496Z] Scanning Deploy action spring-boot-service root at /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot
  → Includes: (none)
  → Excludes: **/.garden/**/*

[2023-07-14T12:20:22.010Z] Found 17 files in Deploy action spring-boot-service root /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot

[2023-07-14T12:20:22.526Z] Done (took 1.4 sec)

[2023-07-14T12:20:23.200Z] resolve Deploy type=pulumi name=spring-boot-service (from module spring-boot-service) is ready.

[2023-07-14T12:20:23.203Z] outdated

[2023-07-14T12:20:23.206Z] Deploying version v-7934ab101c...

[2023-07-14T12:20:23.222Z] merging config for action spring-boot-service

[2023-07-14T12:20:23.223Z] pulumiVariables from action: {}

[2023-07-14T12:20:23.223Z] varfileContents: [
  {
    "thx-sharedServices-spring-boot:app-name": "spring-boot",
    "thx-sharedServices-spring-boot:image-name": "spring-boot-image",
    "thx-sharedServices-spring-boot:app-version": "v-51e9748a55"
  },
  {
    "thx-sharedServices-spring-boot:springProfiles": "gcp,gcp-dev",
    "thx-sharedServices-spring-boot:appName": "spring-boot",
    "thx-sharedServices-spring-boot:namespace": "thx",
    "thx-sharedServices-spring-boot:dockerRepoUrl": "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo"
  },
  {
    "thx-sharedServices-spring-boot:replicas": 1
  }
]

[2023-07-14T12:20:23.223Z] merged vars: {
  "thx-sharedServices-spring-boot:app-name": "spring-boot",
  "thx-sharedServices-spring-boot:image-name": "spring-boot-image",
  "thx-sharedServices-spring-boot:app-version": "v-51e9748a55",
  "thx-sharedServices-spring-boot:springProfiles": "gcp,gcp-dev",
  "thx-sharedServices-spring-boot:appName": "spring-boot",
  "thx-sharedServices-spring-boot:namespace": "thx",
  "thx-sharedServices-spring-boot:dockerRepoUrl": "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo",
  "thx-sharedServices-spring-boot:replicas": 1
}

[2023-07-14T12:20:23.224Z] merged config (written to /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi/Pulumi.dev.yaml): {
  "config": {
    "thx-sharedServices-spring-boot:app-name": "spring-boot",
    "thx-sharedServices-spring-boot:image-name": "spring-boot-image",
    "thx-sharedServices-spring-boot:app-version": "v-51e9748a55",
    "thx-sharedServices-spring-boot:springProfiles": "gcp,gcp-dev",
    "thx-sharedServices-spring-boot:appName": "spring-boot",
    "thx-sharedServices-spring-boot:namespace": "thx",
    "thx-sharedServices-spring-boot:dockerRepoUrl": "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo",
    "thx-sharedServices-spring-boot:replicas": 1
  },
  "backend": {
    "url": "https://api.pulumi.com"
  }
}

[2023-07-14T12:20:23.231Z] Spawning '/home/workstation/.garden/tools/pulumi-3-64-0/0a94b984fa69df6c/pulumi/pulumi stack select telushealth/dev --create' in /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi

[2023-07-14T12:20:24.946Z] Applying pulumi stack...

[2023-07-14T12:20:24.947Z] Spawning '/home/workstation/.garden/tools/pulumi-3-64-0/0a94b984fa69df6c/pulumi/pulumi up --yes --color always --config-file /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi/Pulumi.dev.yaml' in /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi

[2023-07-14T12:20:26.292Z] [pulumi-3-64-0] Previewing update (telushealth/dev)

[2023-07-14T12:20:27.700Z] [pulumi-3-64-0] View Live: https://app.pulumi.com/telushealth/thx-sharedServices-spring-boot/dev/previews/cfdf9ce8-4d4a-45c3-83e9-44436ab2bd28

[2023-07-14T12:20:28.607Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create 

[2023-07-14T12:20:31.000Z] [pulumi-3-64-0] @ Previewing update......

[2023-07-14T12:20:31.000Z] [pulumi-3-64-0]  +  thx:service:ThxrestService spring-boot create 

[2023-07-14T12:20:31.001Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:20:32.587Z] [pulumi-3-64-0] @ Previewing update....

[2023-07-14T12:20:32.588Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:20:32.652Z] [pulumi-3-64-0]  +  pulumi:providers:kubernetes k8s create 

[2023-07-14T12:20:36.063Z] [pulumi-3-64-0] @ Previewing update.......

[2023-07-14T12:20:36.064Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot create 

[2023-07-14T12:20:36.088Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create 

[2023-07-14T12:20:36.089Z] [pulumi-3-64-0] Resources:

[2023-07-14T12:20:36.089Z] [pulumi-3-64-0]     + 4 to create

[2023-07-14T12:20:36.882Z] [pulumi-3-64-0] Updating (telushealth/dev)

[2023-07-14T12:20:38.372Z] [pulumi-3-64-0] View Live: https://app.pulumi.com/telushealth/thx-sharedServices-spring-boot/dev/updates/5

[2023-07-14T12:20:39.227Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (0s) 

[2023-07-14T12:20:40.711Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:20:40.711Z] [pulumi-3-64-0]  +  thx:service:ThxrestService spring-boot creating (0s) 

[2023-07-14T12:20:42.569Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:20:42.570Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (3s) read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:20:44.201Z] [pulumi-3-64-0] @ Updating....

[2023-07-14T12:20:44.202Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (4s) read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:20:45.261Z] [pulumi-3-64-0] @ Updating....

[2023-07-14T12:20:45.261Z] [pulumi-3-64-0]  +  pulumi:providers:kubernetes k8s creating (0s) 

[2023-07-14T12:20:45.963Z] [pulumi-3-64-0] @ Updating....

[2023-07-14T12:20:45.964Z] [pulumi-3-64-0]  +  pulumi:providers:kubernetes k8s created (0.70s) 

[2023-07-14T12:20:48.647Z] [pulumi-3-64-0] @ Updating......

[2023-07-14T12:20:48.647Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (0s) 

[2023-07-14T12:20:50.894Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:20:50.895Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (2s) Retry #0; creation failed: deployments.apps "spring-boot" already exists

[2023-07-14T12:20:50.895Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (2s) error: resource thx/spring-boot was not successfully created by the Kubernetes API server : deployments.apps "spring-boot" already exists

[2023-07-14T12:20:50.896Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot **creating failed** error: resource thx/spring-boot was not successfully created by the Kubernetes API server : deployments.apps "spring-boot" already exists

[2023-07-14T12:20:51.258Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (12s) error: update failed

[2023-07-14T12:20:51.263Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev **creating failed (1s)** 1 error

[2023-07-14T12:20:51.264Z] [pulumi-3-64-0] Diagnostics:

[2023-07-14T12:20:51.264Z] [pulumi-3-64-0]   pulumi:pulumi:Stack (thx-sharedServices-spring-boot-dev):

[2023-07-14T12:20:51.264Z] [pulumi-3-64-0]     error: update failed

[2023-07-14T12:20:51.265Z] [pulumi-3-64-0]   kubernetes:apps/v1:Deployment (spring-boot):

[2023-07-14T12:20:51.265Z] [pulumi-3-64-0]     error: resource thx/spring-boot was not successfully created by the Kubernetes API server : deployments.apps "spring-boot" already exists

[2023-07-14T12:20:51.265Z] [pulumi-3-64-0] Resources:

[2023-07-14T12:20:51.266Z] [pulumi-3-64-0]     + 3 created

[2023-07-14T12:20:51.266Z] [pulumi-3-64-0] Duration: 13s

[2023-07-14T12:20:52.016Z] Failed (took 28.8 sec)

[2023-07-14T12:20:52.042Z] 

Error when applying pulumi stack:
Previewing update (telushealth/dev)

View Live: https://app.pulumi.com/telushealth/thx-sharedServices-spring-boot/dev/previews/cfdf9ce8-4d4a-45c3-83e9-44436ab2bd28


 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create 
@ Previewing update......
 +  thx:service:ThxrestService spring-boot create 
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create read pulumi:pulumi:StackReference telushealth/thx-gke/dev
@ Previewing update....
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create read pulumi:pulumi:StackReference telushealth/thx-gke/dev
 +  pulumi:providers:kubernetes k8s create 
@ Previewing update.......
 +  kubernetes:apps/v1:Deployment spring-boot create 
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create 

Resources:
    + 4 to create

Updating (telushealth/dev)

View Live: https://app.pulumi.com/telushealth/thx-sharedServices-spring-boot/dev/updates/5


 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (0s) 
@ Updating.....
 +  thx:service:ThxrestService spring-boot creating (0s) 
@ Updating.....
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (3s) read pulumi:pulumi:StackReference telushealth/thx-gke/dev
@ Updating....
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (4s) read pulumi:pulumi:StackReference telushealth/thx-gke/dev
@ Updating....
 +  pulumi:providers:kubernetes k8s creating (0s) 
@ Updating....
 +  pulumi:providers:kubernetes k8s created (0.70s) 
@ Updating......
 +  kubernetes:apps/v1:Deployment spring-boot creating (0s) 
@ Updating.....
 +  kubernetes:apps/v1:Deployment spring-boot creating (2s) Retry #0; creation failed: deployments.apps "spring-boot" already exists
 +  kubernetes:apps/v1:Deployment spring-boot creating (2s) error: resource thx/spring-boot was not successfully created by the Kubernetes API server : deployments.apps "spring-boot" already exists
 +  kubernetes:apps/v1:Deployment spring-boot **creating failed** error: resource thx/spring-boot was not successfully created by the Kubernetes API server : deployments.apps "spring-boot" already exists
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (12s) error: update failed
 +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev **creating failed (1s)** 1 error

Diagnostics:
  pulumi:pulumi:Stack (thx-sharedServices-spring-boot-dev):
    error: update failed

  kubernetes:apps/v1:Deployment (spring-boot):
    error: resource thx/spring-boot was not successfully created by the Kubernetes API server : deployments.apps "spring-boot" already exists

Resources:
    + 3 created

Duration: 13s



[2023-07-14T12:20:52.070Z] Done flushing all events and log entries.

[2023-07-14T12:20:52.121Z] Watcher: Initializing

[2023-07-14T12:20:52.121Z] Watcher: Starting FSWatcher

[2023-07-14T12:20:53.362Z] 

1 deploy action(s) failed!

[2023-07-14T12:20:53.369Z] 
See .garden/error.log for detailed error message
