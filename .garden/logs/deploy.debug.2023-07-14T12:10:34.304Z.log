
[2023-07-14T12:10:34.321Z] Getting status...

[2023-07-14T12:10:35.132Z] resolve provider templated is ready.

[2023-07-14T12:10:35.137Z] resolve provider exec is ready.

[2023-07-14T12:10:35.144Z] resolve provider container is ready.

[2023-07-14T12:10:35.152Z] resolve provider pulumi is ready.

[2023-07-14T12:10:35.170Z] resolve provider jib is ready.

[2023-07-14T12:10:35.184Z] resolve provider kubernetes is ready.

[2023-07-14T12:10:35.188Z] Cached (took 0.9 sec)

[2023-07-14T12:10:35.189Z] Run with --force-refresh to force a refresh of provider statuses.

[2023-07-14T12:10:35.189Z] Resolving actions and modules...

[2023-07-14T12:10:35.374Z] Scanning module spring-boot-publish-image root at /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot
  → Includes: ./**/pom.xml,./**/src/**/*,pom.xml
  → Excludes: **/.garden/**/*

[2023-07-14T12:10:35.476Z] Found 3 files in module spring-boot-publish-image root /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot

[2023-07-14T12:10:35.583Z] Scanning module spring-boot-service root at /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot
  → Includes: ./*/config/*.xml,./*/config/application-gcp-dev.properties,./*/config/application-gcp.properties,./*/secrets/dev/**,./deployment/config/common.yaml,deployment/config/dev.yaml
  → Excludes: spring-boot,**/.garden/**/*

[2023-07-14T12:10:35.655Z] Found 2 files in module spring-boot-service root /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot

[2023-07-14T12:10:35.663Z] Converting jib-container module spring-boot-publish-image to actions

[2023-07-14T12:10:35.664Z] Converting pulumi module spring-boot-service to actions

[2023-07-14T12:10:35.667Z] Module spring-boot-service converted to 1 action(s)

[2023-07-14T12:10:35.667Z] Module spring-boot-publish-image converted to 1 action(s)

[2023-07-14T12:10:35.701Z] Scanning Deploy action spring-boot-service root at /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot
  → Includes: (none)
  → Excludes: **/.garden/**/*

[2023-07-14T12:10:36.767Z] Found 17 files in Deploy action spring-boot-service root /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot

[2023-07-14T12:10:37.567Z] Done (took 2.4 sec)

[2023-07-14T12:10:37.830Z] resolve Deploy type=pulumi name=spring-boot-service (from module spring-boot-service) is ready.

[2023-07-14T12:10:37.834Z] outdated

[2023-07-14T12:10:37.837Z] Deploying version v-7934ab101c...

[2023-07-14T12:10:37.858Z] merging config for action spring-boot-service

[2023-07-14T12:10:37.858Z] pulumiVariables from action: {}

[2023-07-14T12:10:37.859Z] varfileContents: [
  {
    "thx-sharedServices-spring-boot:app-name": "spring-boot",
    "thx-sharedServices-spring-boot:image-name": "spring-boot",
    "thx-sharedServices-spring-boot:app-version": "v-e5b98fbac9"
  },
  {
    "thx-sharedServices-spring-boot:springProfiles": "gcp,gcp-dev",
    "thx-sharedServices-spring-boot:appName": "spring-boot",
    "thx-sharedServices-spring-boot:namespace": "thx",
    "thx-sharedServices-spring-boot:dockerRepoUrl": "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/"
  },
  {
    "thx-sharedServices-spring-boot:replicas": 1
  }
]

[2023-07-14T12:10:37.859Z] merged vars: {
  "thx-sharedServices-spring-boot:app-name": "spring-boot",
  "thx-sharedServices-spring-boot:image-name": "spring-boot",
  "thx-sharedServices-spring-boot:app-version": "v-e5b98fbac9",
  "thx-sharedServices-spring-boot:springProfiles": "gcp,gcp-dev",
  "thx-sharedServices-spring-boot:appName": "spring-boot",
  "thx-sharedServices-spring-boot:namespace": "thx",
  "thx-sharedServices-spring-boot:dockerRepoUrl": "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/",
  "thx-sharedServices-spring-boot:replicas": 1
}

[2023-07-14T12:10:37.860Z] merged config (written to /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi/Pulumi.dev.yaml): {
  "config": {
    "thx-sharedServices-spring-boot:app-name": "spring-boot",
    "thx-sharedServices-spring-boot:image-name": "spring-boot",
    "thx-sharedServices-spring-boot:app-version": "v-e5b98fbac9",
    "thx-sharedServices-spring-boot:springProfiles": "gcp,gcp-dev",
    "thx-sharedServices-spring-boot:appName": "spring-boot",
    "thx-sharedServices-spring-boot:namespace": "thx",
    "thx-sharedServices-spring-boot:dockerRepoUrl": "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/",
    "thx-sharedServices-spring-boot:replicas": 1
  },
  "backend": {
    "url": "https://api.pulumi.com"
  }
}

[2023-07-14T12:10:37.868Z] Spawning '/home/workstation/.garden/tools/pulumi-3-64-0/0a94b984fa69df6c/pulumi/pulumi stack select telushealth/dev --create' in /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi

[2023-07-14T12:10:39.437Z] Applying pulumi stack...

[2023-07-14T12:10:39.438Z] Spawning '/home/workstation/.garden/tools/pulumi-3-64-0/0a94b984fa69df6c/pulumi/pulumi up --yes --color always --config-file /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi/Pulumi.dev.yaml' in /home/workstation/thx/workspace/garden-sample-project/garden-sample-project/spring-boot/deployment/pulumi

[2023-07-14T12:10:40.782Z] [pulumi-3-64-0] Previewing update (telushealth/dev)

[2023-07-14T12:10:42.189Z] [pulumi-3-64-0] View Live: https://app.pulumi.com/telushealth/thx-sharedServices-spring-boot/dev/previews/3a7b5951-54f4-40c2-92b4-0804d00a54aa

[2023-07-14T12:10:43.089Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create 

[2023-07-14T12:10:45.760Z] [pulumi-3-64-0] @ Previewing update......

[2023-07-14T12:10:45.761Z] [pulumi-3-64-0]  +  thx:service:ThxrestService spring-boot create 

[2023-07-14T12:10:45.761Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:10:47.404Z] [pulumi-3-64-0] @ Previewing update.....

[2023-07-14T12:10:47.404Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:10:47.467Z] [pulumi-3-64-0]  +  pulumi:providers:kubernetes k8s create 

[2023-07-14T12:10:50.742Z] [pulumi-3-64-0] @ Previewing update......

[2023-07-14T12:10:50.743Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot create 

[2023-07-14T12:10:50.859Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev create 

[2023-07-14T12:10:50.860Z] [pulumi-3-64-0] Resources:

[2023-07-14T12:10:50.860Z] [pulumi-3-64-0]     + 4 to create

[2023-07-14T12:10:51.655Z] [pulumi-3-64-0] Updating (telushealth/dev)

[2023-07-14T12:10:53.234Z] [pulumi-3-64-0] View Live: https://app.pulumi.com/telushealth/thx-sharedServices-spring-boot/dev/updates/3

[2023-07-14T12:10:54.106Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (0s) 

[2023-07-14T12:10:55.577Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:10:55.577Z] [pulumi-3-64-0]  +  thx:service:ThxrestService spring-boot creating (0s) 

[2023-07-14T12:10:56.723Z] [pulumi-3-64-0] @ Updating....

[2023-07-14T12:10:56.723Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (2s) read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:10:59.180Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:10:59.180Z] [pulumi-3-64-0]  +  pulumi:pulumi:Stack thx-sharedServices-spring-boot-dev creating (5s) read pulumi:pulumi:StackReference telushealth/thx-gke/dev

[2023-07-14T12:11:00.261Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:11:00.261Z] [pulumi-3-64-0]  +  pulumi:providers:kubernetes k8s creating (0s) 

[2023-07-14T12:11:01.018Z] [pulumi-3-64-0]  +  pulumi:providers:kubernetes k8s created (0.76s) 

[2023-07-14T12:11:03.711Z] [pulumi-3-64-0] @ Updating......

[2023-07-14T12:11:03.712Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (0s) 

[2023-07-14T12:11:05.972Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:11:05.972Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (2s) 

[2023-07-14T12:11:05.973Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (2s) [1/2] Waiting for app ReplicaSet be marked available

[2023-07-14T12:11:07.937Z] [pulumi-3-64-0] @ Updating.....

[2023-07-14T12:11:07.937Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (4s) warning: [MinimumReplicasUnavailable] Deployment does not have minimum availability.

[2023-07-14T12:11:08.126Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (4s) [1/2] Waiting for app ReplicaSet be marked available (0/1 Pods available)

[2023-07-14T12:11:15.978Z] [pulumi-3-64-0] @ Updating...........

[2023-07-14T12:11:15.978Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (12s) warning: [Pod thx/spring-boot-6d976b86b4-ss2hm]: containers with incomplete status: [install-oneagent]

[2023-07-14T12:11:55.975Z] [pulumi-3-64-0] @ Updating...........................................

[2023-07-14T12:11:55.975Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (52s) warning: [Pod thx/spring-boot-6d976b86b4-ss2hm]: containers with unready status: [spring-boot] -- [PodInitializing] 

[2023-07-14T12:12:15.974Z] [pulumi-3-64-0] @ Updating.......................

[2023-07-14T12:12:15.974Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (72s) warning: [Pod thx/spring-boot-6d976b86b4-ss2hm]: containers with unready status: [spring-boot] -- [ErrImagePull] rpc error: code = NotFound desc = failed to pull and unpack image "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/spring-boot:v-e5b98fbac9": failed to resolve reference "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/spring-boot:v-e5b98fbac9": us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/spring-boot:v-e5b98fbac9: not found

[2023-07-14T12:12:45.973Z] [pulumi-3-64-0] @ Updating.................................

[2023-07-14T12:12:45.974Z] [pulumi-3-64-0]  +  kubernetes:apps/v1:Deployment spring-boot creating (102s) warning: [Pod thx/spring-boot-6d976b86b4-ss2hm]: containers with unready status: [spring-boot] -- [ImagePullBackOff] Back-off pulling image "us-docker.pkg.dev/th-thx-common-46f5/thx-prod-docker-repo/spring-boot:v-e5b98fbac9"
